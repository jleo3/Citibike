<script type="text/javascript">
  navigator.geolocation.getCurrentPosition(handleGeolocation, handleNoGeolocation);

  function handleGeolocation(position) {
    var cookie_val = position.coords.latitude + "|" + position.coords.longitude;
    document.cookie = "lat_lng=" + escape(cookie_val);
    window.location.replace("trips/new");
  };

  function handleNoGeolocation(error) {
    switch(error.code)
    {
      case error.PERMISSION_DENIED:
        return "User denied the request for Geolocation.";
      case error.POSITION_UNAVAILABLE:
        return "Location information is unavailable.";
      case error.TIMEOUT:
        return "The request to get user location timed out.";
      case error.UNKNOWN_ERROR:
        return "An unknown error occurred.";
    }
  }
</script>
