<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    

    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDUxuJVuvsR7Fy6J5ZBThZ4zAX79mrFGbI&sensor=true">
      //having issue here with getting old trips to appear
    </script>

    <script type="text/javascript">
      var directionsService = new google.maps.DirectionsService();

      function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();

        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById("directions"));

        addMarker(<%=@trip.origin_lat%>, <%=@trip.origin_long%>, "You are here!");
        addMarker(<%=@trip.destination_lat%>, <%=@trip.destination_long%>, "Final destination")
      } //end initialize

      google.maps.event.addDomListener(window,'load',initialize);

      <% orig_station = "#{@trip.origin_closest_station_lat}, #{@trip.origin_closest_station_long}" %>
      <% dest_station = "#{@trip.dest_closest_station_lat}, #{@trip.dest_closest_station_long}" %>
      //show station-station directions
      calcRoute("<%= orig_station %>", "<%= dest_station %>");

    </script>
  </head>
  <body>
  	<header>
  	  <%= link_to "home", root_path %>  
  	</header>
  	<h3><%= @trip.origin %> to <%= @trip.destination %></h3>
  	<h4>Get a bike at: <%=@orig_sta["label"]%></h4>
  	<h4>Park your bike at: <%=@dest_sta["label"]%></h4>
  	<h4><%= @lat_lng %></h4>
  	<div id="map-canvas" style="width: 700px; height: 900px"/>
  	</div>
  	
  </body>
</html>
