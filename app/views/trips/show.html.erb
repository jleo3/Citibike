<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <!--
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; text-align: center;padding: 0 }
      #map-canvas { 
        height: 100%;
      }
    </style>
	-->
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDUxuJVuvsR7Fy6J5ZBThZ4zAX79mrFGbI&sensor=true">
    </script>

    <script type="text/javascript">
      var directionsService = new google.maps.DirectionsService();

      function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();

        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById("directions"));

        addMarker(<%=@trip.origin_lat%>, <%=@trip.origin_long%>, "<%=@trip.origin%>");
        addMarker(<%=@trip.destination_lat%>, <%=@trip.destination_long%>, "<%=@trip.destination%>")
      } //end initialize

      google.maps.event.addDomListener(window,'load',initialize);

      <% orig_station = @trip.closest_station_name(@trip.origin_lat, @trip.origin_long) %>
      <% dest_station = @trip.closest_station_name(
          	@trip.destination_lat, @trip.destination_long) %>
      //show station-station directions
      calcRoute("<%= orig_station %>", "<%= dest_station %>");

    </script>
  </head>
  <body>
  	<p><%= @trip.origin %> to <%= @trip.destination %></p>
  	<div id="map-canvas" style="width: 700px; height: 900px"/>
  </div>
  	<div id="directions" style="float:left;width:30%;height:100%">
  </div>
  </body>
</html>
